<div>
    <or-spinner [channel]="CHANNEL_STATE_KEY"></or-spinner>
    <div class="avam-panel avam-panel-light mb-0">
        <p class="mb-0">
            <b>{{ 'amm.akquisition.label.auszahlungsdatentz' | translate }}</b>
        </p>
    </div>
    <avam-auszahlungsdaten-table
        [dataSource]="teilzahlungswerteDataSource"
        [total]="teilzahlungswerteTotal"
        [tableType]="tableType.TEILZAHLUNGSWERTE"
    ></avam-auszahlungsdaten-table>
    <hr class="hr-thick mt-2" />
    <div class="avam-panel  avam-panel-light mb-0">
        <p class="mb-0">
            <b>{{ 'amm.akquisition.label.auszahlungsdatenab' | translate }}</b>
        </p>
    </div>
    <avam-auszahlungsdaten-table
        [dataSource]="abrechnungswerteDataSource"
        [total]="abrechnungswerteTotal"
        [tableType]="tableType.ABRECHNUNGSWERTE"
        [footer2]="true"
        [secondFooterTotal]="summeTotal"
    ></avam-auszahlungsdaten-table>
</div>

<avam-action-footer [buttonsTemplate]="footerButtons"></avam-action-footer>

<ng-template #footerButtons>
    <ng-container>
        <button *ngIf="standort || massnahme || kurs" class="btn btn-primary ml-1" type="button" (click)="quernavigate()" [permissions]="[permissions.AMM_MASSNAHMEN_SICHTEN]">
            {{ quernavigationsLabel | translate }}
        </button>
    </ng-container>
</ng-template>

<ng-template #infobarTemplate>
    <div *ngIf="lv" class="item">
        <b> {{ 'amm.akquisition.label.leistungsvereinbarungsnr' | translate }} </b>
        <span>{{ lv?.leistungsvereinbarungNr }}</span>
    </div>
    <div *ngIf="lv" class="item">
        <b> {{ 'common.label.status' | translate }} </b>
        <span>{{ lvStatus }}</span>
    </div>
    <div *ngIf="vertragswert" class="item">
        <b> {{ nummerLabel | translate }} </b>
        <span>{{ reverenzierteObjNummer }}</span>
    </div>
    <div *ngIf="title" class="item">
        <b> {{ 'amm.akquisition.label.titel' | translate }} </b>
        <span>{{ title | translate }}</span>
    </div>
    <div *ngIf="vertragswert" class="item">
        <b> {{ 'amm.akquisition.label.profilnr' | translate }} </b>
        <span>{{ vertragswert?.profilNr }}</span>
    </div>
    <div *ngIf="vertragswert" class="item">
        <b> {{ 'amm.akquisition.label.vertragswertnr' | translate }} </b>
        <span>{{ vertragswert?.vertragswertNr }}</span>
    </div>
</ng-template>
